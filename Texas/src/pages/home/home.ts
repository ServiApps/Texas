import {Component} from '@angular/core';
import {NavController} from 'ionic-angular';
import {ProductsPage} from '../products/products';
import {CartPage} from '../cart/cart';
import {SearchPage} from '../search/search';
import {Service} from '../../providers/service/service';
import { Values } from '../../providers/service/values';

@Component({
  templateUrl: 'home.html'
})
export class Home {

  status: any;
  items: any;
  product: any;
  options: any;
  id: any;
  variationID: any;

  constructor(public nav:NavController, public service: Service, public values: Values) {

    this.items = [];
    this.options = [];

    this.product = {"product":{"title":"Woo Single #2","id":99,"created_at":"2013-06-07T11:38:12Z","updated_at":"2017-01-17T16:27:48Z","type":"variable","status":"publish","downloadable":false,"virtual":false,"permalink":"http:\/\/localhost:8888\/wp\/product\/woo-single-2\/","sku":"sdsf","price":"3","regular_price":"","sale_price":null,"price_html":"<span class=\"woocommerce-Price-amount amount\"><span class=\"woocommerce-Price-currencySymbol\">&#36;<\/span>3.00<\/span>&ndash;<span class=\"woocommerce-Price-amount amount\"><span class=\"woocommerce-Price-currencySymbol\">&#36;<\/span>10.00<\/span>","taxable":false,"tax_status":"\n<![CDATA[ ]]>\n","tax_class":"\n<![CDATA[ ]]>\n","managing_stock":true,"stock_quantity":1000,"in_stock":true,"backorders_allowed":false,"backordered":false,"sold_individually":false,"purchaseable":true,"featured":false,"visible":true,"catalog_visibility":"visible","on_sale":false,"product_url":"","button_text":"","weight":null,"dimensions":{"length":"","width":"","height":"","unit":"in"},"shipping_required":true,"shipping_taxable":false,"shipping_class":"","shipping_class_id":null,"description":"","short_description":"","reviews_allowed":true,"average_rating":"0.00","rating_count":0,"related_ids":[100],"upsell_ids":[],"cross_sell_ids":[],"parent_id":0,"categories":["Albums","Clothing","Hoodies","Music","Posters","Singles","T-shirts"],"tags":[],"images":[{"id":0,"created_at":"2017-01-27T09:29:07Z","updated_at":"2017-01-27T09:29:07Z","src":"http:\/\/localhost:8888\/wp\/wp-content\/plugins\/woocommerce\/assets\/images\/placeholder.png","title":"Placeholder","alt":"Placeholder","position":0}],"featured_src":"","attributes":[{"name":"Color","slug":"color","position":0,"visible":false,"variation":true,"options":["black","blue","Green"]}],"downloads":[],"download_limit":0,"download_expiry":0,"download_type":"","purchase_note":"","total_sales":0,"variations":[{"id":105,"created_at":"2017-01-27T09:27:45Z","updated_at":"2017-01-27T09:28:21Z","downloadable":false,"virtual":false,"permalink":"http:\/\/localhost:8888\/wp\/product\/woo-single-2\/?attribute_pa_color=green","sku":"sdsf","price":"3","regular_price":"3","sale_price":null,"taxable":false,"tax_status":"\n<![CDATA[ ]]>\n","tax_class":"\n<![CDATA[ ]]>\n","managing_stock":"parent","stock_quantity":1000,"in_stock":true,"backorders_allowed":false,"backordered":false,"purchaseable":true,"visible":true,"on_sale":false,"weight":null,"dimensions":{"length":"","width":"","height":"","unit":"in"},"shipping_class":"","shipping_class_id":null,"image":[{"id":0,"created_at":"2017-01-27T09:29:07Z","updated_at":"2017-01-27T09:29:07Z","src":"http:\/\/localhost:8888\/wp\/wp-content\/plugins\/woocommerce\/assets\/images\/placeholder.png","title":"Placeholder","alt":"Placeholder","position":0}],"attributes":[{"name":"Color","slug":"color","option":"green"}],"downloads":[],"download_limit":0,"download_expiry":0},{"id":106,"created_at":"2017-01-27T09:27:45Z","updated_at":"2017-01-27T09:28:21Z","downloadable":false,"virtual":false,"permalink":"http:\/\/localhost:8888\/wp\/product\/woo-single-2\/?attribute_pa_color=blue","sku":"sdsf","price":"5","regular_price":"5","sale_price":null,"taxable":false,"tax_status":"\n<![CDATA[ ]]>\n","tax_class":"\n<![CDATA[ ]]>\n","managing_stock":"parent","stock_quantity":1000,"in_stock":true,"backorders_allowed":false,"backordered":false,"purchaseable":true,"visible":true,"on_sale":false,"weight":null,"dimensions":{"length":"","width":"","height":"","unit":"in"},"shipping_class":"","shipping_class_id":null,"image":[{"id":0,"created_at":"2017-01-27T09:29:07Z","updated_at":"2017-01-27T09:29:07Z","src":"http:\/\/localhost:8888\/wp\/wp-content\/plugins\/woocommerce\/assets\/images\/placeholder.png","title":"Placeholder","alt":"Placeholder","position":0}],"attributes":[{"name":"Color","slug":"color","option":"blue"}],"downloads":[],"download_limit":0,"download_expiry":0},{"id":107,"created_at":"2017-01-27T09:27:45Z","updated_at":"2017-01-27T09:28:21Z","downloadable":false,"virtual":false,"permalink":"http:\/\/localhost:8888\/wp\/product\/woo-single-2\/?attribute_pa_color=black","sku":"sdsf","price":"10","regular_price":"10","sale_price":null,"taxable":false,"tax_status":"\n<![CDATA[ ]]>\n","tax_class":"\n<![CDATA[ ]]>\n","managing_stock":"parent","stock_quantity":1000,"in_stock":true,"backorders_allowed":false,"backordered":false,"purchaseable":true,"visible":true,"on_sale":false,"weight":null,"dimensions":{"length":"","width":"","height":"","unit":"in"},"shipping_class":"","shipping_class_id":null,"image":[{"id":0,"created_at":"2017-01-27T09:29:07Z","updated_at":"2017-01-27T09:29:07Z","src":"http:\/\/localhost:8888\/wp\/wp-content\/plugins\/woocommerce\/assets\/images\/placeholder.png","title":"Placeholder","alt":"Placeholder","position":0}],"attributes":[{"name":"Color","slug":"color","option":"black"}],"downloads":[],"download_limit":0,"download_expiry":0}],"parent":[],"grouped_products":[],"menu_order":0}};
    //this.product = {"product":{"title":"Woo Album #3","id":90,"created_at":"2013-06-07T11:35:18Z","updated_at":"2017-01-17T16:09:31Z","type":"simple","status":"publish","downloadable":false,"virtual":false,"permalink":"http:\/\/localhost:8888\/wp\/product\/woo-album-3\/","sku":"\n<![CDATA[ ]]>\n","price":"\n<![CDATA[ 9 ]]>\n","regular_price":"\n<![CDATA[ 9 ]]>\n","sale_price":"\n<![CDATA[ ]]>\n","price_html":"<span class=\"amount\">Free!<\/span>","taxable":false,"tax_status":"\n<![CDATA[ ]]>\n","tax_class":"\n<![CDATA[ ]]>\n","managing_stock":true,"stock_quantity":1000,"in_stock":true,"backorders_allowed":false,"backordered":false,"sold_individually":false,"purchaseable":true,"featured":false,"visible":false,"catalog_visibility":"\n<![CDATA[ visible ]]>\n","on_sale":false,"product_url":"","button_text":"","weight":null,"dimensions":{"length":"\n<![CDATA[ ]]>\n","width":"\n<![CDATA[ ]]>\n","height":"\n<![CDATA[ ]]>\n","unit":"in"},"shipping_required":true,"shipping_taxable":false,"shipping_class":"","shipping_class_id":null,"description":"<p><![CDATA[\nPellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.\n]]><\/p>\n","short_description":"<p><![CDATA[\nPellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.\n]]><\/p>\n","reviews_allowed":true,"average_rating":"0.00","rating_count":0,"related_ids":[100,99],"upsell_ids":[],"cross_sell_ids":[],"parent_id":0,"categories":["Albums","Music"],"tags":[],"images":[{"id":0,"created_at":"2017-01-27T10:06:27Z","updated_at":"2017-01-27T10:06:27Z","src":"http:\/\/localhost:8888\/wp\/wp-content\/plugins\/woocommerce\/assets\/images\/placeholder.png","title":"Placeholder","alt":"Placeholder","position":0}],"featured_src":"","attributes":[],"downloads":[],"download_limit":0,"download_expiry":0,"download_type":"","purchase_note":"","total_sales":0,"variations":[],"parent":[],"grouped_products":[],"menu_order":0}};
    //this.product = {"product":{"title":"Sample Product","id":100,"created_at":"2017-01-17T16:28:55Z","updated_at":"2017-01-17T16:39:19Z","type":"variable","status":"publish","downloadable":false,"virtual":false,"permalink":"http:\/\/localhost:8888\/wp\/product\/sample-product\/","sku":"sdfds","price":"2","regular_price":"","sale_price":null,"price_html":"<del><span class=\"woocommerce-Price-amount amount\"><span class=\"woocommerce-Price-currencySymbol\">&#36;<\/span>10.00<\/span><\/del> <ins><span class=\"woocommerce-Price-amount amount\"><span class=\"woocommerce-Price-currencySymbol\">&#36;<\/span>2.00<\/span>&ndash;<span class=\"woocommerce-Price-amount amount\"><span class=\"woocommerce-Price-currencySymbol\">&#36;<\/span>8.00<\/span><\/ins>","taxable":false,"tax_status":"taxable","tax_class":"","managing_stock":true,"stock_quantity":1000,"in_stock":true,"backorders_allowed":false,"backordered":false,"sold_individually":false,"purchaseable":true,"featured":false,"visible":true,"catalog_visibility":"visible","on_sale":true,"product_url":"","button_text":"","weight":null,"dimensions":{"length":"","width":"","height":"","unit":"in"},"shipping_required":true,"shipping_taxable":true,"shipping_class":"","shipping_class_id":null,"description":"<p>Description<\/p>\n","short_description":"","reviews_allowed":true,"average_rating":"0.00","rating_count":0,"related_ids":[99],"upsell_ids":[],"cross_sell_ids":[],"parent_id":0,"categories":["Albums","Clothing","Hoodies","Music","Posters","Singles","T-shirts"],"tags":[],"images":[{"id":0,"created_at":"2017-01-18T17:13:24Z","updated_at":"2017-01-18T17:13:24Z","src":"http:\/\/localhost:8888\/wp\/wp-content\/plugins\/woocommerce\/assets\/images\/placeholder.png","title":"Placeholder","alt":"Placeholder","position":0}],"featured_src":"","attributes":[{"name":"Color","slug":"color","position":0,"visible":true,"variation":true,"options":["black","blue","Green"]},{"name":"Size","slug":"size","position":1,"visible":true,"variation":true,"options":["medium","small"]}],"downloads":[],"download_limit":0,"download_expiry":0,"download_type":"","purchase_note":"","total_sales":0,"variations":[{"id":101,"created_at":"2017-01-17T16:37:14Z","updated_at":"2017-01-17T18:40:49Z","downloadable":false,"virtual":false,"permalink":"http:\/\/localhost:8888\/wp\/product\/sample-product\/?attribute_pa_color=green&attribute_pa_size=medium","sku":"sdfds","price":"","regular_price":"","sale_price":null,"taxable":false,"tax_status":"taxable","tax_class":"","managing_stock":"parent","stock_quantity":1000,"in_stock":true,"backorders_allowed":false,"backordered":false,"purchaseable":false,"visible":false,"on_sale":false,"weight":null,"dimensions":{"length":"","width":"","height":"","unit":"in"},"shipping_class":"","shipping_class_id":null,"image":[{"id":0,"created_at":"2017-01-18T17:13:24Z","updated_at":"2017-01-18T17:13:24Z","src":"http:\/\/localhost:8888\/wp\/wp-content\/plugins\/woocommerce\/assets\/images\/placeholder.png","title":"Placeholder","alt":"Placeholder","position":0}],"attributes":[{"name":"Color","slug":"color","option":"green"},{"name":"Size","slug":"size","option":"medium"}],"downloads":[],"download_limit":0,"download_expiry":0},{"id":102,"created_at":"2017-01-17T16:37:14Z","updated_at":"2017-01-17T18:40:49Z","downloadable":false,"virtual":false,"permalink":"http:\/\/localhost:8888\/wp\/product\/sample-product\/?attribute_pa_color=blue&attribute_pa_size=small","sku":"sdfds","price":"8","regular_price":"10","sale_price":"8","taxable":false,"tax_status":"taxable","tax_class":"","managing_stock":"parent","stock_quantity":1000,"in_stock":true,"backorders_allowed":false,"backordered":false,"purchaseable":true,"visible":true,"on_sale":true,"weight":null,"dimensions":{"length":"","width":"","height":"","unit":"in"},"shipping_class":"","shipping_class_id":null,"image":[{"id":0,"created_at":"2017-01-18T17:13:24Z","updated_at":"2017-01-18T17:13:24Z","src":"http:\/\/localhost:8888\/wp\/wp-content\/plugins\/woocommerce\/assets\/images\/placeholder.png","title":"Placeholder","alt":"Placeholder","position":0}],"attributes":[{"name":"Color","slug":"color","option":"blue"},{"name":"Size","slug":"size","option":"small"}],"downloads":[],"download_limit":0,"download_expiry":0},{"id":103,"created_at":"2017-01-17T16:37:14Z","updated_at":"2017-01-17T18:40:49Z","downloadable":false,"virtual":false,"permalink":"http:\/\/localhost:8888\/wp\/product\/sample-product\/?attribute_pa_color=black&attribute_pa_size=medium","sku":"sdfds","price":"2","regular_price":"10","sale_price":"2","taxable":false,"tax_status":"taxable","tax_class":"","managing_stock":true,"stock_quantity":1000,"in_stock":true,"backorders_allowed":false,"backordered":false,"purchaseable":true,"visible":true,"on_sale":true,"weight":null,"dimensions":{"length":"","width":"","height":"","unit":"in"},"shipping_class":"","shipping_class_id":null,"image":[{"id":0,"created_at":"2017-01-18T17:13:24Z","updated_at":"2017-01-18T17:13:24Z","src":"http:\/\/localhost:8888\/wp\/wp-content\/plugins\/woocommerce\/assets\/images\/placeholder.png","title":"Placeholder","alt":"Placeholder","position":0}],"attributes":[{"name":"Color","slug":"color","option":"black"},{"name":"Size","slug":"size","option":"medium"}],"downloads":[],"download_limit":0,"download_expiry":0}],"parent":[],"grouped_products":[],"menu_order":0}};
    this.product = {"id":99,"name":"Woo Single #2","slug":"woo-single-2","permalink":"http:\/\/localhost:8888\/wp\/product\/woo-single-2\/","date_created":"2013-06-07T11:38:12","date_modified":"2017-01-17T16:27:48","type":"variable","status":"publish","featured":false,"catalog_visibility":"visible","description":"","short_description":"","sku":"sdsf","price":"3","regular_price":"","sale_price":"","date_on_sale_from":"","date_on_sale_to":"","price_html":"<span class=\"woocommerce-Price-amount amount\"><span class=\"woocommerce-Price-currencySymbol\">&#36;<\/span>3.00<\/span>&ndash;<span class=\"woocommerce-Price-amount amount\"><span class=\"woocommerce-Price-currencySymbol\">&#36;<\/span>10.00<\/span>","on_sale":false,"purchasable":true,"total_sales":0,"virtual":false,"downloadable":false,"downloads":[],"download_limit":-1,"download_expiry":-1,"download_type":"standard","external_url":"","button_text":"","tax_status":"\n<![CDATA[ ]]>\n","tax_class":"\n<![CDATA[ ]]>\n","manage_stock":true,"stock_quantity":1000,"in_stock":true,"backorders":"no","backorders_allowed":false,"backordered":false,"sold_individually":false,"weight":"","dimensions":{"length":"","width":"","height":""},"shipping_required":true,"shipping_taxable":false,"shipping_class":"","shipping_class_id":0,"reviews_allowed":true,"average_rating":"0.00","rating_count":0,"related_ids":[100],"upsell_ids":[],"cross_sell_ids":[],"parent_id":0,"purchase_note":"","categories":[{"id":13,"name":"Albums","slug":"albums"},{"id":6,"name":"Clothing","slug":"clothing"},{"id":11,"name":"Hoodies","slug":"hoodies"},{"id":14,"name":"Music","slug":"music"},{"id":12,"name":"Posters","slug":"posters"},{"id":15,"name":"Singles","slug":"singles"},{"id":7,"name":"T-shirts","slug":"t-shirts"}],"tags":[],"images":[{"id":0,"date_created":"2017-01-27T11:53:19","date_modified":"2017-01-27T11:53:19","src":"http:\/\/localhost:8888\/wp\/wp-content\/plugins\/woocommerce\/assets\/images\/placeholder.png","name":"Placeholder","alt":"Placeholder","position":0}],"attributes":[{"id":1,"name":"Color","position":0,"visible":false,"variation":true,"options":["black","blue","Green"]}],"default_attributes":[],"variations":[{"id":105,"date_created":"2017-01-27T09:27:45","date_modified":"2017-01-27T09:28:21","permalink":"http:\/\/localhost:8888\/wp\/product\/woo-single-2\/?attribute_pa_color=green","sku":"sdsf","price":"3","regular_price":"3","sale_price":"","date_on_sale_from":"","date_on_sale_to":"","on_sale":false,"purchasable":true,"visible":true,"virtual":false,"downloadable":false,"downloads":[],"download_limit":-1,"download_expiry":-1,"tax_status":"\n<![CDATA[ ]]>\n","tax_class":"\n<![CDATA[ ]]>\n","manage_stock":"parent","stock_quantity":1000,"in_stock":true,"backorders":"no","backorders_allowed":false,"backordered":false,"weight":"","dimensions":{"length":"","width":"","height":""},"shipping_class":"","shipping_class_id":0,"image":[{"id":0,"date_created":"2017-01-27T11:53:19","date_modified":"2017-01-27T11:53:19","src":"http:\/\/localhost:8888\/wp\/wp-content\/plugins\/woocommerce\/assets\/images\/placeholder.png","name":"Placeholder","alt":"Placeholder","position":0}],"attributes":[{"id":1,"name":"Color","option":"Green"}]},{"id":106,"date_created":"2017-01-27T09:27:45","date_modified":"2017-01-27T09:28:21","permalink":"http:\/\/localhost:8888\/wp\/product\/woo-single-2\/?attribute_pa_color=blue","sku":"sdsf","price":"5","regular_price":"5","sale_price":"","date_on_sale_from":"","date_on_sale_to":"","on_sale":false,"purchasable":true,"visible":true,"virtual":false,"downloadable":false,"downloads":[],"download_limit":-1,"download_expiry":-1,"tax_status":"\n<![CDATA[ ]]>\n","tax_class":"\n<![CDATA[ ]]>\n","manage_stock":"parent","stock_quantity":1000,"in_stock":true,"backorders":"no","backorders_allowed":false,"backordered":false,"weight":"","dimensions":{"length":"","width":"","height":""},"shipping_class":"","shipping_class_id":0,"image":[{"id":0,"date_created":"2017-01-27T11:53:19","date_modified":"2017-01-27T11:53:19","src":"http:\/\/localhost:8888\/wp\/wp-content\/plugins\/woocommerce\/assets\/images\/placeholder.png","name":"Placeholder","alt":"Placeholder","position":0}],"attributes":[{"id":1,"name":"Color","option":"blue"}]},{"id":107,"date_created":"2017-01-27T09:27:45","date_modified":"2017-01-27T09:28:21","permalink":"http:\/\/localhost:8888\/wp\/product\/woo-single-2\/?attribute_pa_color=black","sku":"sdsf","price":"10","regular_price":"10","sale_price":"","date_on_sale_from":"","date_on_sale_to":"","on_sale":false,"purchasable":true,"visible":true,"virtual":false,"downloadable":false,"downloads":[],"download_limit":-1,"download_expiry":-1,"tax_status":"\n<![CDATA[ ]]>\n","tax_class":"\n<![CDATA[ ]]>\n","manage_stock":"parent","stock_quantity":1000,"in_stock":true,"backorders":"no","backorders_allowed":false,"backordered":false,"weight":"","dimensions":{"length":"","width":"","height":""},"shipping_class":"","shipping_class_id":0,"image":[{"id":0,"date_created":"2017-01-27T11:53:19","date_modified":"2017-01-27T11:53:19","src":"http:\/\/localhost:8888\/wp\/wp-content\/plugins\/woocommerce\/assets\/images\/placeholder.png","name":"Placeholder","alt":"Placeholder","position":0}],"attributes":[{"id":1,"name":"Color","option":"black"}]}],"grouped_products":[],"menu_order":0,"_links":{"self":[{"href":"http:\/\/localhost:8888\/wp\/wp-json\/wc\/v1\/products\/99"}],"collection":[{"href":"http:\/\/localhost:8888\/wp\/wp-json\/wc\/v1\/products"}]}};   
  }

  getCategory(id, slug){
    this.items.id = id;
    this.items.slug = slug;
    this.items.categories = this.service.categories;
      this.nav.push(ProductsPage, this.items);
  }

  getCart(){
      this.nav.push(CartPage);
  }

  getSearch(){
      this.nav.push(SearchPage);
  }

  mySlideOptions = {
    initialSlide: 1,
    loop: true,
    autoplay: 5800,
    pager: true
  }

  getId(){

        var text = '{';
        var i;
        for (i = 0; i < this.options.length; i++) {
            var res = this.options[i].split(":");
            text += '"'+res[0]+'":"'+res[1]+'",';
        }

        text += '"quantity":"' + i + '"}';

        var obj = JSON.parse(text);
  
        if(this.options.length >= 1)
        var resa = this.options[0].split(":");
        if(this.options.length >= 2)
        var resb = this.options[1].split(":");

      if(this.options.length >= 1)
      for (i = 0; i < this.product.product.variations.length; i++) {

        if(this.product.product.variations[i].attributes[0].option == resa[1]){
            if(this.options.length == 1){
            console.log(this.product.product.variations[i].id);
            break;}
            else if(this.product.product.variations[i].attributes[1].option == resb[1]){
              console.log(this.product.product.variations[i].id);
              break;
            }  

        }
      } 

  }


}
